{"remainingRequest":"D:\\_codes\\MyProjects\\vuetestbs\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\_codes\\MyProjects\\vuetestbs\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\_codes\\MyProjects\\vuetestbs\\src\\App.vue","mtime":1611984403645},{"path":"D:\\_codes\\MyProjects\\vuetestbs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\_codes\\MyProjects\\vuetestbs\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\_codes\\MyProjects\\vuetestbs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\_codes\\MyProjects\\vuetestbs\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXBwIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgd2lkdGg6IDEyODAsCiAgICAgIGhlaWdodDogNzIwLAogICAgICByZWN0OiBbXSwKICAgICAgY2FudmFzOiB7fSwKICAgICAgc2hvd01lbnU6IGZhbHNlLAogICAgICB4OiAiIiwKICAgICAgeTogIiIsCiAgICAgIG1vdXNlRnJvbToge30sCiAgICAgIG1vdXNlVG86IHt9LAogICAgICBkcmF3VHlwZTogbnVsbCwgIC8v5b2T5YmN57uY5Yi25Zu+5YOP55qE56eN57G7CiAgICAgIGNhbnZhc09iamVjdEluZGV4OiAwLAogICAgICB0ZXh0Ym94OiBudWxsLAogICAgICByZWN0YW5nbGVMYWJlbDogIndhcm5pbmciLAogICAgICBkcmF3V2lkdGg6IDIsIC8v56yU6Kem5a695bqmCiAgICAgIGNvbG9yOiAiI0UzNEY1MSIsIC8v55S756yU6aKc6ImyCiAgICAgIGRyYXdpbmdPYmplY3Q6IG51bGwsIC8v5b2T5YmN57uY5Yi25a+56LGhCiAgICAgIG1vdmVDb3VudDogMSwgLy/nu5jliLbnp7vliqjorqHmlbDlmagKICAgICAgZG9EcmF3aW5nOiBmYWxzZSwgLy8g57uY5Yi254q25oCBCiAgICAgIC8vcG9seWdvbiDnm7jlhbPlj4LmlbAKICAgICAgcG9seWdvbk1vZGU6IGZhbHNlLAogICAgICBwb2ludEFycmF5OiBbXSwKICAgICAgbGluZUFycmF5OiBbXSwKICAgICAgYWN0aXZlU2hhcGU6IGZhbHNlLAogICAgICBhY3RpdmVMaW5lOiAiIiwKICAgICAgbGluZToge30sCiAgICAgIGRlbGVjdEtsYXNzOiB7fSwKICAgICAgaW1nRmlsZToge30sCiAgICAgIGltZ1NyYzogIiIsCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGRyYXdUeXBlKCkgewogICAgICB0aGlzLmNhbnZhcy5zZWxlY3Rpb24gPSAhdGhpcy5kcmF3VHlwZTsKICAgIH0sCiAgICB3aWR0aCgpIHsKICAgICAgdGhpcy5jYW52YXMuc2V0V2lkdGgodGhpcy53aWR0aCkKICAgIH0sCiAgICBoZWlnaHQoKSB7CiAgICAgIHRoaXMuY2FudmFzLnNldEhlaWdodCh0aGlzLmhlaWdodCkKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDkv53lrZjlvZPliY3nlLvluIPkuLpwbmflm77niYcKICAgIHNhdmUoKSB7CiAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykKICAgICAgdmFyIGltZ0RhdGEgPSBjYW52YXMudG9EYXRhVVJMKCdwbmcnKTsKICAgICAgaW1nRGF0YSA9IGltZ0RhdGEucmVwbGFjZSgnaW1hZ2UvcG5nJywgJ2ltYWdlL29jdGV0LXN0cmVhbScpOwogICAgICAvLyDkuIvovb3lkI7nmoTpl67popjlkI3vvIzlj6/oh6rnlLHmjIflrpoKICAgICAgdmFyIGZpbGVuYW1lID0gJ2RyYXdpbmdib2FyZF8nICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKSArICcuJyArICdwbmcnOwogICAgICB0aGlzLnNhdmVGaWxlKGltZ0RhdGEsIGZpbGVuYW1lKTsKICAgIH0sCiAgICBzYXZlRmlsZShkYXRhLCBmaWxlbmFtZSkgewogICAgICB2YXIgc2F2ZV9saW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICBzYXZlX2xpbmsuaHJlZiA9IGRhdGE7CiAgICAgIHNhdmVfbGluay5kb3dubG9hZCA9IGZpbGVuYW1lOwogICAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTsKICAgICAgZXZlbnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgZmFsc2UsIHdpbmRvdywgMCwgMCwgMCwgMCwgMCwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDAsIG51bGwpOwogICAgICBzYXZlX2xpbmsuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICB9LAogICAgdXBsb2FkSW1nKCkgewogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW1nSW5wdXQiKS5jbGljaygpOwogICAgfSwKICAgIC8vIOS7juW3sua4suafk+eahERPTeWFg+e0oOWKoOi9veWbvueJh+iHs2NhbnZhcwogICAgbG9hZEV4cEltZygpIHsKICAgICAgdmFyIGltZ0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXhwSW1nIik7IC8v5aOw5piO5oiR5Lus55qE5Zu+54mHCiAgICAgIHZhciBpbWdJbnN0YW5jZSA9IG5ldyBmYWJyaWMuSW1hZ2UoaW1nRWxlbWVudCwgewogICAgICAgIHNlbGVjdGFibGU6IGZhbHNlCiAgICAgICAgLy8gekluZGV4Oi05OSwKICAgICAgfSk7CiAgICAgIHRoaXMuY2FudmFzLmFkZChpbWdJbnN0YW5jZSk7CiAgICB9LAogICAgLy8g5LuO5paH5Lu25Yqg6L295Zu+54mH6IezY2FudmFzCiAgICB1cGxvYWRJbWdDaGFuZ2UoKSB7CiAgICAgIC8vIOiOt+WPluaWh+S7tgogICAgICB2YXIgZWxlSW1wb3J0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW1nSW5wdXQiKTsKICAgICAgdGhpcy5pbWdGaWxlID0gZWxlSW1wb3J0SW5wdXQuZmlsZXNbMF07CiAgICAgIHZhciBpbWdTcmMgPSAiIiwKICAgICAgICAgIGltZ1RpdGxlID0gIiI7CiAgICAgIC8vIOS7jnJlYWRlcuS4reiOt+WPlumAieaLqeaWh+S7tueahHNyYwogICAgICBpZiAoL1wuKGpwZT9nfHBuZ3xnaWYpJC9pLnRlc3QodGhpcy5pbWdGaWxlLm5hbWUpKSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcigKICAgICAgICAgICAgImxvYWQiLAogICAgICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaW1nVGl0bGUgPSBfdGhpcy5pbWdGaWxlLm5hbWU7CiAgICAgICAgICAgICAgX3RoaXMuaW1nU3JjID0gdGhpcy5yZXN1bHQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmltZ0ZpbGUpOwogICAgICB9CiAgICAgIHZhciBpbWdFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImltZyIpOyAvL+WjsOaYjuaIkeS7rOeahOWbvueJhwogICAgICBpbWdFbGVtZW50Lm9ubG9hZCA9ICgpID0+IHsKICAgICAgICB0aGlzLndpZHRoID0gaW1nRWxlbWVudC53aWR0aAogICAgICAgIHRoaXMuaGVpZ2h0ID0gaW1nRWxlbWVudC5oZWlnaHQKICAgICAgICB2YXIgaW1nSW5zdGFuY2UgPSBuZXcgZmFicmljLkltYWdlKGltZ0VsZW1lbnQsIHsKICAgICAgICAgIHpJbmRleDogLTEsCiAgICAgICAgICBzZWxlY3RhYmxlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2FudmFzLmFkZChpbWdJbnN0YW5jZSk7CiAgICAgIH07CiAgICB9LAogICAgLy8g5byA5aeL57uY5Yi25pe277yM5oyH5a6a57uY55S756eN57G7CiAgICBkcmF3VHlwZUNoYW5nZShlKSB7CiAgICAgIHRoaXMuZHJhd1R5cGUgPSBlOwogICAgICB0aGlzLmNhbnZhcy5za2lwVGFyZ2V0RmluZCA9ICEhZQogICAgICBpZiAoZSA9PSAicGVuIikgewogICAgICAgIC8vIGlzRHJhd2luZ01vZGXkuLp0cnVlIOaJjeWPr+S7peiHqueUsee7mOeUuwogICAgICAgIHRoaXMuY2FudmFzLmlzRHJhd2luZ01vZGUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2FudmFzLmlzRHJhd2luZ01vZGUgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOm8oOagh+aMieS4i+aXtuinpuWPkQogICAgbW91c2Vkb3duKGUpIHsKICAgICAgLy8g6K6w5b2V6byg5qCH5oyJ5LiL5pe255qE5Z2Q5qCHCiAgICAgIHZhciB4eSA9IGUucG9pbnRlciB8fCB0aGlzLnRyYW5zZm9ybU1vdXNlKGUuZS5vZmZzZXRYLCBlLmUub2Zmc2V0WSk7CiAgICAgIHRoaXMubW91c2VGcm9tLnggPSB4eS54OwogICAgICB0aGlzLm1vdXNlRnJvbS55ID0geHkueTsKICAgICAgdGhpcy5kb0RyYXdpbmcgPSB0cnVlOwogICAgICBpZiAodGhpcy5kcmF3VHlwZSA9PSAidGV4dCIpIHsKICAgICAgICB0aGlzLmRyYXdpbmcoKTsKICAgICAgfQogICAgICBpZiAodGhpcy50ZXh0Ym94KSB7CiAgICAgICAgdGhpcy50ZXh0Ym94LmVudGVyRWRpdGluZygpOwogICAgICAgIHRoaXMudGV4dGJveC5oaWRkZW5UZXh0YXJlYS5mb2N1cygpOwogICAgICB9CiAgICAgIC8vIOe7mOWItuWkmui+ueW9ogogICAgICBpZiAodGhpcy5kcmF3VHlwZSA9PSAicG9seWdvbiIpIHsKICAgICAgICB0aGlzLmNhbnZhcy5za2lwVGFyZ2V0RmluZCA9IGZhbHNlOwogICAgICAgIHRyeSB7CiAgICAgICAgICAvLyDmraTmrrXkuLrliKTmlq3mmK/lkKbpl63lkIjlpJrovrnlvaLvvIzngrnlh7vnuqLngrnml7bpl63lkIjlpJrovrnlvaIKICAgICAgICAgIGlmICh0aGlzLnBvaW50QXJyYXkubGVuZ3RoID4gMSkgewogICAgICAgICAgICAvLyBlLnRhcmdldC5pZCA9PSB0aGlzLnBvaW50QXJyYXlbMF0uaWQg6KGo56S654K55Ye75LqG5Yid5aeL57qi54K5CiAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiBlLnRhcmdldC5pZCA9PSB0aGlzLnBvaW50QXJyYXlbMF0uaWQpIHsKICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlUG9seWdvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAvL+acqueCueWHu+e6oueCueWImee7p+e7reS9nOeUuwogICAgICAgICAgaWYgKHRoaXMucG9seWdvbk1vZGUpIHsKICAgICAgICAgICAgdGhpcy5hZGRQb2ludChlKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOm8oOagh+advuW8gOaJp+ihjAogICAgbW91c2V1cChlKSB7CiAgICAgIHZhciB4eSA9IGUucG9pbnRlciB8fCB0aGlzLnRyYW5zZm9ybU1vdXNlKGUuZS5vZmZzZXRYLCBlLmUub2Zmc2V0WSk7CiAgICAgIHRoaXMubW91c2VUby54ID0geHkueDsKICAgICAgdGhpcy5tb3VzZVRvLnkgPSB4eS55OwogICAgICB0aGlzLmRyYXdpbmdPYmplY3QgPSBudWxsOwogICAgICB0aGlzLm1vdmVDb3VudCA9IDE7CiAgICAgIGlmICh0aGlzLmRyYXdUeXBlICE9ICJwb2x5Z29uIikgewogICAgICAgIHRoaXMuZG9EcmF3aW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAvL+m8oOagh+enu+WKqOi/h+eoi+S4reW3sue7j+WujOaIkOS6hue7mOWItgogICAgbW91c2Vtb3ZlKGUpIHsKICAgICAgaWYgKHRoaXMubW92ZUNvdW50ICUgMiAmJiAhdGhpcy5kb0RyYXdpbmcpIHsKICAgICAgICAvL+WHj+Wwkee7mOWItumikeeOhwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLm1vdmVDb3VudCsrOwogICAgICB2YXIgeHkgPSBlLnBvaW50ZXIgfHwgdGhpcy50cmFuc2Zvcm1Nb3VzZShlLmUub2Zmc2V0WCwgZS5lLm9mZnNldFkpOwogICAgICB0aGlzLm1vdXNlVG8ueCA9IHh5Lng7CiAgICAgIHRoaXMubW91c2VUby55ID0geHkueTsKICAgICAgLy8g5aSa6L655b2i5LiO5paH5a2X5qGG54m55q6K5aSE55CGCiAgICAgIGlmICh0aGlzLmRyYXdUeXBlICE9ICJ0ZXh0IiB8fCB0aGlzLmRyYXdUeXBlICE9ICJwb2x5Z29uIikgewogICAgICAgIHRoaXMuZHJhd2luZyhlKTsKICAgICAgfQogICAgICBpZiAodGhpcy5kcmF3VHlwZSA9PSAicG9seWdvbiIpIHsKICAgICAgICBpZiAodGhpcy5hY3RpdmVMaW5lICYmIHRoaXMuYWN0aXZlTGluZS5jbGFzcyA9PSAibGluZSIpIHsKICAgICAgICAgIHZhciBwb2ludGVyID0gdGhpcy5jYW52YXMuZ2V0UG9pbnRlcihlLmUpOwogICAgICAgICAgdGhpcy5hY3RpdmVMaW5lLnNldCh7IHgyOiBwb2ludGVyLngsIHkyOiBwb2ludGVyLnkgfSk7CiAgICAgICAgICB2YXIgcG9pbnRzID0gdGhpcy5hY3RpdmVTaGFwZS5nZXQoInBvaW50cyIpOwogICAgICAgICAgcG9pbnRzW3RoaXMucG9pbnRBcnJheS5sZW5ndGhdID0gewogICAgICAgICAgICB4OiBwb2ludGVyLngsCiAgICAgICAgICAgIHk6IHBvaW50ZXIueSwKICAgICAgICAgICAgekluZGV4OiAxCiAgICAgICAgICB9OwogICAgICAgICAgdGhpcy5hY3RpdmVTaGFwZS5zZXQoewogICAgICAgICAgICBwb2ludHM6IHBvaW50cwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmNhbnZhcy5yZW5kZXJBbGwoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5jYW52YXMucmVuZGVyQWxsKCk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxldGVPYmooKSB7CiAgICAgIHRoaXMuY2FudmFzLmdldEFjdGl2ZU9iamVjdHMoKS5tYXAoaXRlbSA9PiB7CiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKGl0ZW0pOwogICAgICB9KTsKICAgIH0sCiAgICB0cmFuc2Zvcm1Nb3VzZShtb3VzZVgsIG1vdXNlWSkgewogICAgICByZXR1cm4geyB4OiBtb3VzZVggLyAxLCB5OiBtb3VzZVkgLyAxIH07CiAgICB9LAogICAgLy8g57uY5Yi25aSa6L655b2i5byA5aeL77yM57uY5Yi25aSa6L655b2i5ZKM5YW25LuW5Zu+5b2i5LiN5LiA5qC377yM6ZyA6KaB5Y2V54us5aSE55CGCiAgICBkcmF3UG9seWdvbigpIHsKICAgICAgdGhpcy5kcmF3VHlwZSA9ICJwb2x5Z29uIjsKICAgICAgdGhpcy5wb2x5Z29uTW9kZSA9IHRydWU7CiAgICAgIC8v6L+Z6YeM55S755qE5aSa6L655b2i77yM55Sx6aG254K55LiO57q/57uE5oiQCiAgICAgIHRoaXMucG9pbnRBcnJheSA9IG5ldyBBcnJheSgpOyAgLy8g6aG254K56ZuG5ZCICiAgICAgIHRoaXMubGluZUFycmF5ID0gbmV3IEFycmF5KCk7ICAvL+e6v+mbhuWQiAogICAgICB0aGlzLmNhbnZhcy5pc0RyYXdpbmdNb2RlID0gZmFsc2U7CiAgICB9LAogICAgYWRkUG9pbnQoZSkgewogICAgICB2YXIgcmFuZG9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApOwogICAgICB2YXIgaWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHJhbmRvbTsKICAgICAgdmFyIGNpcmNsZSA9IG5ldyBmYWJyaWMuQ2lyY2xlKHsKICAgICAgICByYWRpdXM6IDUsCiAgICAgICAgZmlsbDogIiNmZmZmZmYiLAogICAgICAgIHN0cm9rZTogIiMzMzMzMzMiLAogICAgICAgIHN0cm9rZVdpZHRoOiAwLjUsCiAgICAgICAgbGVmdDogKGUucG9pbnRlci54IHx8IGUuZS5sYXllclgpIC8gdGhpcy5jYW52YXMuZ2V0Wm9vbSgpLAogICAgICAgIHRvcDogKGUucG9pbnRlci55IHx8IGUuZS5sYXllclkpIC8gdGhpcy5jYW52YXMuZ2V0Wm9vbSgpLAogICAgICAgIHNlbGVjdGFibGU6IGZhbHNlLAogICAgICAgIGhhc0JvcmRlcnM6IGZhbHNlLAogICAgICAgIGhhc0NvbnRyb2xzOiBmYWxzZSwKICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICBvcmlnaW5ZOiAiY2VudGVyIiwKICAgICAgICBpZDogaWQsCiAgICAgICAgb2JqZWN0Q2FjaGluZzogZmFsc2UKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLnBvaW50QXJyYXkubGVuZ3RoID09IDApIHsKICAgICAgICBjaXJjbGUuc2V0KHsKICAgICAgICAgIGZpbGw6ICJyZWQiCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIHBvaW50cyA9IFsKICAgICAgICAoZS5wb2ludGVyLnggfHwgZS5lLmxheWVyWCkgLyB0aGlzLmNhbnZhcy5nZXRab29tKCksCiAgICAgICAgKGUucG9pbnRlci55IHx8IGUuZS5sYXllclkpIC8gdGhpcy5jYW52YXMuZ2V0Wm9vbSgpLAogICAgICAgIChlLnBvaW50ZXIueCB8fCBlLmUubGF5ZXJYKSAvIHRoaXMuY2FudmFzLmdldFpvb20oKSwKICAgICAgICAoZS5wb2ludGVyLnkgfHwgZS5lLmxheWVyWSkgLyB0aGlzLmNhbnZhcy5nZXRab29tKCkKICAgICAgXTsKICAgICAgdGhpcy5saW5lID0gbmV3IGZhYnJpYy5MaW5lKHBvaW50cywgewogICAgICAgIHN0cm9rZVdpZHRoOiAyLAogICAgICAgIGZpbGw6ICIjOTk5OTk5IiwKICAgICAgICBzdHJva2U6ICIjOTk5OTk5IiwKICAgICAgICBjbGFzczogImxpbmUiLAogICAgICAgIG9yaWdpblg6ICJjZW50ZXIiLAogICAgICAgIG9yaWdpblk6ICJjZW50ZXIiLAogICAgICAgIHNlbGVjdGFibGU6IGZhbHNlLAogICAgICAgIGhhc0JvcmRlcnM6IGZhbHNlLAogICAgICAgIGhhc0NvbnRyb2xzOiBmYWxzZSwKICAgICAgICBldmVudGVkOiBmYWxzZSwKICAgICAgICBvYmplY3RDYWNoaW5nOiBmYWxzZQogICAgICB9KTsKICAgICAgaWYgKHRoaXMuYWN0aXZlU2hhcGUpIHsKICAgICAgICB2YXIgcG9zID0gdGhpcy5jYW52YXMuZ2V0UG9pbnRlcihlLmUpOwogICAgICAgIHZhciBwb2ludHMgPSB0aGlzLmFjdGl2ZVNoYXBlLmdldCgicG9pbnRzIik7CiAgICAgICAgcG9pbnRzLnB1c2goewogICAgICAgICAgeDogcG9zLngsCiAgICAgICAgICB5OiBwb3MueQogICAgICAgIH0pOwogICAgICAgIHZhciBwb2x5Z29uID0gbmV3IGZhYnJpYy5Qb2x5Z29uKHBvaW50cywgewogICAgICAgICAgc3Ryb2tlOiAiIzMzMzMzMyIsCiAgICAgICAgICBzdHJva2VXaWR0aDogMSwKICAgICAgICAgIGZpbGw6ICIjY2NjY2NjIiwKICAgICAgICAgIG9wYWNpdHk6IDAuMywKICAgICAgICAgIHNlbGVjdGFibGU6IGZhbHNlLAogICAgICAgICAgaGFzQm9yZGVyczogZmFsc2UsCiAgICAgICAgICBoYXNDb250cm9sczogZmFsc2UsCiAgICAgICAgICBldmVudGVkOiBmYWxzZSwKICAgICAgICAgIG9iamVjdENhY2hpbmc6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKHRoaXMuYWN0aXZlU2hhcGUpOwogICAgICAgIHRoaXMuY2FudmFzLmFkZChwb2x5Z29uKTsKICAgICAgICB0aGlzLmFjdGl2ZVNoYXBlID0gcG9seWdvbjsKICAgICAgICB0aGlzLmNhbnZhcy5yZW5kZXJBbGwoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcG9seVBvaW50ID0gWwogICAgICAgICAgewogICAgICAgICAgICB4OiAoZS5wb2ludGVyLnggfHwgZS5lLmxheWVyWCkgLyB0aGlzLmNhbnZhcy5nZXRab29tKCksCiAgICAgICAgICAgIHk6IChlLnBvaW50ZXIueSB8fCBlLmUubGF5ZXJZKSAvIHRoaXMuY2FudmFzLmdldFpvb20oKQogICAgICAgICAgfQogICAgICAgIF07CiAgICAgICAgdmFyIHBvbHlnb24gPSBuZXcgZmFicmljLlBvbHlnb24ocG9seVBvaW50LCB7CiAgICAgICAgICBzdHJva2U6ICIjMzMzMzMzIiwKICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLAogICAgICAgICAgZmlsbDogIiNjY2NjY2MiLAogICAgICAgICAgb3BhY2l0eTogMC4zLAogICAgICAgICAgc2VsZWN0YWJsZTogZmFsc2UsCiAgICAgICAgICBoYXNCb3JkZXJzOiBmYWxzZSwKICAgICAgICAgIGhhc0NvbnRyb2xzOiBmYWxzZSwKICAgICAgICAgIGV2ZW50ZWQ6IGZhbHNlLAogICAgICAgICAgb2JqZWN0Q2FjaGluZzogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFjdGl2ZVNoYXBlID0gcG9seWdvbjsKICAgICAgICB0aGlzLmNhbnZhcy5hZGQocG9seWdvbik7CiAgICAgIH0KICAgICAgdGhpcy5hY3RpdmVMaW5lID0gdGhpcy5saW5lOwogICAgICB0aGlzLnBvaW50QXJyYXkucHVzaChjaXJjbGUpOwogICAgICB0aGlzLmxpbmVBcnJheS5wdXNoKHRoaXMubGluZSk7CiAgICAgIHRoaXMuY2FudmFzLmFkZCh0aGlzLmxpbmUpOwogICAgICB0aGlzLmNhbnZhcy5hZGQoY2lyY2xlKTsKICAgIH0sCiAgICBnZW5lcmF0ZVBvbHlnb24oKSB7CiAgICAgIHZhciBwb2ludHMgPSBuZXcgQXJyYXkoKTsKICAgICAgdGhpcy5wb2ludEFycmF5Lm1hcCgocG9pbnQsIGluZGV4KSA9PiB7CiAgICAgICAgcG9pbnRzLnB1c2goewogICAgICAgICAgeDogcG9pbnQubGVmdCwKICAgICAgICAgIHk6IHBvaW50LnRvcAogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2FudmFzLnJlbW92ZShwb2ludCk7CiAgICAgIH0pOwogICAgICB0aGlzLmxpbmVBcnJheS5tYXAoKGxpbmUsIGluZGV4KSA9PiB7CiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKGxpbmUpOwogICAgICB9KTsKICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKHRoaXMuYWN0aXZlU2hhcGUpLnJlbW92ZSh0aGlzLmFjdGl2ZUxpbmUpOwogICAgICB2YXIgcG9seWdvbiA9IG5ldyBmYWJyaWMuUG9seWdvbihwb2ludHMsIHsKICAgICAgICBzdHJva2U6IHRoaXMuY29sb3IsCiAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMuZHJhd1dpZHRoLAogICAgICAgIGZpbGw6ICJyZ2JhKDI1NSwgMjU1LCAyNTUsIDApIiwKICAgICAgICBvcGFjaXR5OiAxLAogICAgICAgIGhhc0JvcmRlcnM6IHRydWUsCiAgICAgICAgaGFzQ29udHJvbHM6IGZhbHNlCiAgICAgIH0pOwogICAgICB0aGlzLmNhbnZhcy5hZGQocG9seWdvbik7CiAgICAgIHRoaXMuYWN0aXZlTGluZSA9IG51bGw7CiAgICAgIHRoaXMuYWN0aXZlU2hhcGUgPSBudWxsOwogICAgICB0aGlzLnBvbHlnb25Nb2RlID0gZmFsc2U7CiAgICAgIHRoaXMuZG9EcmF3aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZHJhd1R5cGUgPSBudWxsOwogICAgfSwKICAgIGRyYXdpbmcoZSkgewogICAgICBpZiAodGhpcy5kcmF3aW5nT2JqZWN0KSB7CiAgICAgICAgdGhpcy5jYW52YXMucmVtb3ZlKHRoaXMuZHJhd2luZ09iamVjdCk7CiAgICAgIH0KICAgICAgdmFyIGNhbnZhc09iamVjdCA9IG51bGw7CiAgICAgIHZhciBsZWZ0ID0gdGhpcy5tb3VzZUZyb20ueCwKICAgICAgICAgIHRvcCA9IHRoaXMubW91c2VGcm9tLnksCiAgICAgICAgICBtb3VzZUZyb20gPSB0aGlzLm1vdXNlRnJvbSwKICAgICAgICAgIG1vdXNlVG8gPSB0aGlzLm1vdXNlVG87CiAgICAgIHN3aXRjaCAodGhpcy5kcmF3VHlwZSkgewogICAgICAgIGNhc2UgImFycm93IjogLy/nrq3lpLQKICAgICAgICAgIHZhciB4MSA9IG1vdXNlRnJvbS54LAogICAgICAgICAgICAgIHgyID0gbW91c2VUby54LAogICAgICAgICAgICAgIHkxID0gbW91c2VGcm9tLnksCiAgICAgICAgICAgICAgeTIgPSBtb3VzZVRvLnk7CiAgICAgICAgICB2YXIgdyA9IHgyIC0geDEsCiAgICAgICAgICAgICAgaCA9IHkyIC0geTEsCiAgICAgICAgICAgICAgc2ggPSBNYXRoLmNvcyhNYXRoLlBJIC8gNCkgKiAxNjsKICAgICAgICAgIHZhciBzaW4gPSBoIC8gTWF0aC5zcXJ0KE1hdGgucG93KHcsIDIpICsgTWF0aC5wb3coaCwgMikpOwogICAgICAgICAgdmFyIGNvcyA9IHcgLyBNYXRoLnNxcnQoTWF0aC5wb3codywgMikgKyBNYXRoLnBvdyhoLCAyKSk7CiAgICAgICAgICB2YXIgdzEgPSAoMTYgKiBzaW4pIC8gNCwKICAgICAgICAgICAgICBoMSA9ICgxNiAqIGNvcykgLyA0LAogICAgICAgICAgICAgIGNlbnRlcnggPSBzaCAqIGNvcywKICAgICAgICAgICAgICBjZW50ZXJ5ID0gc2ggKiBzaW47CiAgICAgICAgICAvKioKICAgICAgICAgICAqIGNlbnRlcngsY2VudGVyeSDooajnpLrotbflp4vngrnvvIznu4jngrnov57nur/kuI7nrq3lpLTlsJbnq6/nrYnovrnkuInop5LlvaLkuqTngrnnm7jlr7l477yMeQogICAgICAgICAgICogdzEg77yMaDHnlKjkuo7noa7lrprlm5vkuKrngrkKICAgICAgICAgICAqLwogICAgICAgICAgdmFyIHBhdGggPSAiIE0gIiArIHgxICsgIiAiICsgeTE7CiAgICAgICAgICBwYXRoICs9ICIgTCAiICsgKHgyIC0gY2VudGVyeCArIHcxKSArICIgIiArICh5MiAtIGNlbnRlcnkgLSBoMSk7CiAgICAgICAgICBwYXRoICs9CiAgICAgICAgICAgICAgIiBMICIgKyAoeDIgLSBjZW50ZXJ4ICsgdzEgKiAyKSArICIgIiArICh5MiAtIGNlbnRlcnkgLSBoMSAqIDIpOwogICAgICAgICAgcGF0aCArPSAiIEwgIiArIHgyICsgIiAiICsgeTI7CiAgICAgICAgICBwYXRoICs9CiAgICAgICAgICAgICAgIiBMICIgKyAoeDIgLSBjZW50ZXJ4IC0gdzEgKiAyKSArICIgIiArICh5MiAtIGNlbnRlcnkgKyBoMSAqIDIpOwogICAgICAgICAgcGF0aCArPSAiIEwgIiArICh4MiAtIGNlbnRlcnggLSB3MSkgKyAiICIgKyAoeTIgLSBjZW50ZXJ5ICsgaDEpOwogICAgICAgICAgcGF0aCArPSAiIFoiOwogICAgICAgICAgY2FudmFzT2JqZWN0ID0gbmV3IGZhYnJpYy5QYXRoKHBhdGgsIHsKICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbG9yLAogICAgICAgICAgICBmaWxsOiB0aGlzLmNvbG9yLAogICAgICAgICAgICBzdHJva2VXaWR0aDogdGhpcy5kcmF3V2lkdGgKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicGVudGFncmFtIjogLy/kupTop5LmmJ8KICAgICAgICAgIHZhciB4MSA9IG1vdXNlRnJvbS54LAogICAgICAgICAgICAgIHgyID0gbW91c2VUby54LAogICAgICAgICAgICAgIHkxID0gbW91c2VGcm9tLnksCiAgICAgICAgICAgICAgeTIgPSBtb3VzZVRvLnk7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIOWunueOsOaAnei3ryAgKHgxLHkxKeihqOekuum8oOagh+i1t+Wni+eahOS9jee9riAoeDIseTIp6KGo56S66byg5qCH5oqs6LW355qE5L2N572uCiAgICAgICAgICAgKiByIOihqOekuuS6lOi+ueW9ouWkluWciOWchueahOWNiuW+hO+8jOi/memHjOW7uuiuruiHquW3seeUu+S4quWbvueQhuinowogICAgICAgICAgICog5q2j5LqU6L655b2i5aS56KeS5Li6MzbluqbjgILorqHnrpflh7pjb3MxOMKw77yMc2luMTjCsOWkh+eUqAogICAgICAgICAgICovCiAgICAgICAgICB2YXIgdyA9IE1hdGguYWJzKHgyIC0geDEpLAogICAgICAgICAgICAgIGggPSBNYXRoLmFicyh5MiAtIHkxKSwKICAgICAgICAgICAgICByID0gTWF0aC5zcXJ0KHcgKiB3ICsgaCAqIGgpCiAgICAgICAgICB2YXIgY29zMTggPSBNYXRoLmNvcygxOCAqIE1hdGguUEkgLyAxODApCiAgICAgICAgICB2YXIgc2luMTggPSBNYXRoLnNpbigxOCAqIE1hdGguUEkgLyAxODApCiAgICAgICAgICAvKioKICAgICAgICAgICAqIOeul+WHuuWvueW6lOS6lOS4queCueeahOWdkOagh+i9rOWMluS4uui3r+W+hAogICAgICAgICAgICovCiAgICAgICAgICB2YXIgcG9pbnQxID0gW3gxLCB5MSArIHJdCiAgICAgICAgICB2YXIgcG9pbnQyID0gW3gxICsgMiAqIHIgKiAoc2luMTgpLCB5MSArIHIgLSAyICogciAqIChjb3MxOCldCiAgICAgICAgICB2YXIgcG9pbnQzID0gW3gxIC0gciAqIChjb3MxOCksIHkxICsgciAqIChzaW4xOCldCiAgICAgICAgICB2YXIgcG9pbnQ0ID0gW3gxICsgciAqIChjb3MxOCksIHkxICsgciAqIChzaW4xOCldCiAgICAgICAgICB2YXIgcG9pbnQ1ID0gW3gxIC0gMiAqIHIgKiAoc2luMTgpLCB5MSArIHIgLSAyICogciAqIChjb3MxOCldCiAgICAgICAgICB2YXIgcGF0aCA9ICIgTSAiICsgcG9pbnQxWzBdICsgIiAiICsgcG9pbnQxWzFdCiAgICAgICAgICBwYXRoICs9ICIgTCAiICsgcG9pbnQyWzBdICsgIiAiICsgcG9pbnQyWzFdCiAgICAgICAgICBwYXRoICs9ICIgTCAiICsgcG9pbnQzWzBdICsgIiAiICsgcG9pbnQzWzFdCiAgICAgICAgICBwYXRoICs9ICIgTCAiICsgcG9pbnQ0WzBdICsgIiAiICsgcG9pbnQ0WzFdCiAgICAgICAgICBwYXRoICs9ICIgTCAiICsgcG9pbnQ1WzBdICsgIiAiICsgcG9pbnQ1WzFdCiAgICAgICAgICBwYXRoICs9ICIgWiI7CiAgICAgICAgICBjYW52YXNPYmplY3QgPSBuZXcgZmFicmljLlBhdGgocGF0aCwgewogICAgICAgICAgICBzdHJva2U6IHRoaXMuY29sb3IsCiAgICAgICAgICAgIGZpbGw6IHRoaXMuY29sb3IsCiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLmRyYXdXaWR0aCwKICAgICAgICAgICAgLy8gYW5nbGU6MTgwLCAgLy/orr7nva7ml4vovazop5LluqYKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiZWxsaXBzZSI6IC8v5qSt5ZyGCiAgICAgICAgICAvLyDmjIlzaGlmdOaXtueUu+ato+Wchu+8jOWPquacieWcqOm8oOagh+enu+WKqOaXtuaJjeaJp+ihjOi/meS4qu+8jOaJgOS7peaMieS6hnNoaWZ05L2G5piv5rKh5pyJ5ouW5Yqo6byg5qCH5bCG5LiN5Lya55S75ZyGCiAgICAgICAgICBpZiAoZS5lLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgIG1vdXNlVG8ueCAtIGxlZnQgPiBtb3VzZVRvLnkgLSB0b3AgPyBtb3VzZVRvLnkgPSB0b3AgKyBtb3VzZVRvLnggLSBsZWZ0IDogbW91c2VUby54ID0gbGVmdCArIG1vdXNlVG8ueSAtIHRvcAogICAgICAgICAgfQogICAgICAgICAgdmFyIHJhZGl1cyA9CiAgICAgICAgICAgICAgTWF0aC5zcXJ0KAogICAgICAgICAgICAgICAgICAobW91c2VUby54IC0gbGVmdCkgKiAobW91c2VUby54IC0gbGVmdCkgKwogICAgICAgICAgICAgICAgICAobW91c2VUby55IC0gdG9wKSAqIChtb3VzZVRvLnkgLSB0b3ApCiAgICAgICAgICAgICAgKSAvIDI7CiAgICAgICAgICBjYW52YXNPYmplY3QgPSBuZXcgZmFicmljLkVsbGlwc2UoewogICAgICAgICAgICBsZWZ0OiAobW91c2VUby54IC0gbGVmdCkgLyAyICsgbGVmdCwKICAgICAgICAgICAgdG9wOiAobW91c2VUby55IC0gdG9wKSAvIDIgKyB0b3AsCiAgICAgICAgICAgIHN0cm9rZTogdGhpcy5jb2xvciwKICAgICAgICAgICAgZmlsbDogInJnYmEoMjU1LCAyNTUsIDI1NSwgMCkiLAogICAgICAgICAgICBvcmlnaW5YOiAiY2VudGVyIiwKICAgICAgICAgICAgb3JpZ2luWTogImNlbnRlciIsCiAgICAgICAgICAgIHJ4OiBNYXRoLmFicyhsZWZ0IC0gbW91c2VUby54KSAvIDIsCiAgICAgICAgICAgIHJ5OiBNYXRoLmFicyh0b3AgLSBtb3VzZVRvLnkpIC8gMiwKICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMuZHJhd1dpZHRoCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInJlY3RhbmdsZSI6IC8v6ZW/5pa55b2iCiAgICAgICAgICAvLyDmjIlzaGlmdOaXtueUu+ato+aWueWeiwogICAgICAgICAgaWYgKGUuZS5zaGlmdEtleSkgewogICAgICAgICAgICBtb3VzZVRvLnggLSBsZWZ0ID4gbW91c2VUby55IC0gdG9wID8gbW91c2VUby55ID0gdG9wICsgbW91c2VUby54IC0gbGVmdCA6IG1vdXNlVG8ueCA9IGxlZnQgKyBtb3VzZVRvLnkgLSB0b3AKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwYXRoID0KICAgICAgICAgICAgICAiTSAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueCArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueSArCiAgICAgICAgICAgICAgIiBMICIgKwogICAgICAgICAgICAgIG1vdXNlVG8ueCArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueSArCiAgICAgICAgICAgICAgIiBMICIgKwogICAgICAgICAgICAgIG1vdXNlVG8ueCArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICBtb3VzZVRvLnkgKwogICAgICAgICAgICAgICIgTCAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueCArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICBtb3VzZVRvLnkgKwogICAgICAgICAgICAgICIgTCAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueCArCiAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICBtb3VzZUZyb20ueSArCiAgICAgICAgICAgICAgIiB6IjsKICAgICAgICAgIGNhbnZhc09iamVjdCA9IG5ldyBmYWJyaWMuUGF0aChwYXRoLCB7CiAgICAgICAgICAgIGxlZnQ6IGxlZnQsCiAgICAgICAgICAgIHRvcDogdG9wLAogICAgICAgICAgICBzdHJva2U6IHRoaXMuY29sb3IsCiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLmRyYXdXaWR0aCwKICAgICAgICAgICAgZmlsbDogInJnYmEoMjU1LCAyNTUsIDI1NSwgMCkiLAogICAgICAgICAgICBoYXNDb250cm9sczogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgICAgLy/kuZ/lj6/ku6Xkvb/nlKhmYWJyaWMuUmVjdAogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAidGV4dCI6IC8v5paH5pys5qGGCiAgICAgICAgICB0aGlzLnRleHRib3ggPSBuZXcgZmFicmljLlRleHRib3goIiIsIHsKICAgICAgICAgICAgbGVmdDogbW91c2VGcm9tLngsCiAgICAgICAgICAgIHRvcDogbW91c2VGcm9tLnkgLSAxMCwKICAgICAgICAgICAgLy8gd2lkdGg6IDE1MCwKICAgICAgICAgICAgZm9udFNpemU6IDE2LAogICAgICAgICAgICBib3JkZXJDb2xvcjogdGhpcy5jb2xvciwKICAgICAgICAgICAgZmlsbDogdGhpcy5jb2xvciwKICAgICAgICAgICAgaGFzQ29udHJvbHM6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuY2FudmFzLmFkZCh0aGlzLnRleHRib3gpOwogICAgICAgICAgdGhpcy50ZXh0Ym94LmVudGVyRWRpdGluZygpOwogICAgICAgICAgdGhpcy50ZXh0Ym94LmhpZGRlblRleHRhcmVhLmZvY3VzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgaWYgKGNhbnZhc09iamVjdCkgewogICAgICAgIC8vIGNhbnZhc09iamVjdC5pbmRleCA9IGdldENhbnZhc09iamVjdEluZGV4KCk7XAogICAgICAgIHRoaXMuY2FudmFzLmFkZChjYW52YXNPYmplY3QpOyAvLy5zZXRBY3RpdmVPYmplY3QoY2FudmFzT2JqZWN0KQogICAgICAgIHRoaXMuZHJhd2luZ09iamVjdCA9IGNhbnZhc09iamVjdDsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2FudmFzID0gbmV3IGZhYnJpYy5DYW52YXMoImNhbnZhcyIsIHsKICAgICAgLy8gc2tpcFRhcmdldEZpbmQ6IGZhbHNlLCAvL+W9k+S4uuecn+aXtu+8jOi3s+i/h+ebruagh+ajgOa1i+OAguebruagh+ajgOa1i+Wwhui/lOWbnuWni+e7iOacquWumuS5ieOAgueCueWHu+mAieaLqeWwhuaXoOaViAogICAgICAvLyBzZWxlY3RhYmxlOiBmYWxzZSwgIC8v5Li6ZmFsc2Xml7bvvIzkuI3og73pgInmi6nlr7nosaHov5vooYzkv67mlLkKICAgICAgLy8gc2VsZWN0aW9uOiBmYWxzZSAgIC8vIOaYr+WQpuWPr+S7peWkmuS4quWvueixoeS4uuS4gOe7hAogICAgfSk7CiAgICB0aGlzLmNhbnZhcy5zZWxlY3Rpb25Db2xvciA9ICJyZ2JhKDAsMCwwLDAuMDUpIjsKICAgIHRoaXMuY2FudmFzLm9uKCJtb3VzZTpkb3duIiwgdGhpcy5tb3VzZWRvd24pOwogICAgdGhpcy5jYW52YXMub24oIm1vdXNlOm1vdmUiLCB0aGlzLm1vdXNlbW92ZSk7CiAgICB0aGlzLmNhbnZhcy5vbigibW91c2U6dXAiLCB0aGlzLm1vdXNldXApOwogICAgZG9jdW1lbnQub25rZXlkb3duID0gZSA9PiB7CiAgICAgIC8vIOmUruebmCBkZWxlY3TliKDpmaTmiYDpgInlhYPntKAKICAgICAgaWYgKGUua2V5Q29kZSA9PSA0NikgewogICAgICAgIHRoaXMuZGVsZXRlT2JqKCk7CiAgICAgIH0KICAgICAgLy8gY3RybCt6IOWIoOmZpOacgOi/kea3u+WKoOeahOWFg+e0oAogICAgICBpZiAoZS5rZXlDb2RlID09IDkwICYmIGUuY3RybEtleSkgewogICAgICAgIHRoaXMuY2FudmFzLnJlbW92ZSgKICAgICAgICAgICAgdGhpcy5jYW52YXMuZ2V0T2JqZWN0cygpW3RoaXMuY2FudmFzLmdldE9iamVjdHMoKS5sZW5ndGggLSAxXQogICAgICAgICk7CiAgICAgIH0KICAgIH07CiAgICAvLyB2YXIgb3JpZ2luYWxSZW5kZXIgPSBmYWJyaWMuVGV4dGJveC5wcm90b3R5cGUuX3JlbmRlcjsKICAgIC8vIGZhYnJpYy5UZXh0Ym94LnByb3RvdHlwZS5fcmVuZGVyID0gZnVuY3Rpb24oY3R4KSB7CiAgICAvLyAgIG9yaWdpbmFsUmVuZGVyLmNhbGwodGhpcywgY3R4KTsKICAgIC8vICAgLy9Eb24ndCBkcmF3IGJvcmRlciBpZiBpdCBpcyBhY3RpdmUoc2VsZWN0ZWQvIGVkaXRpbmcgbW9kZSkKICAgIC8vICAgaWYgKHRoaXMuYWN0aXZlKSByZXR1cm47CiAgICAvLyAgIGlmKHRoaXMuc2hvd1RleHRCb3hCb3JkZXIpewogICAgLy8gICAgIHZhciB3ID0gdGhpcy53aWR0aCwKICAgIC8vICAgICAgIGggPSB0aGlzLmhlaWdodCwKICAgIC8vICAgICAgIHggPSAtdGhpcy53aWR0aCAvIDIsCiAgICAvLyAgICAgICB5ID0gLXRoaXMuaGVpZ2h0IC8gMjsKICAgIC8vICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAvLyAgICAgY3R4Lm1vdmVUbyh4LCB5KTsKICAgIC8vICAgICBjdHgubGluZVRvKHggKyB3LCB5KTsKICAgIC8vICAgICBjdHgubGluZVRvKHggKyB3LCB5ICsgaCk7CiAgICAvLyAgICAgY3R4LmxpbmVUbyh4LCB5ICsgaCk7CiAgICAvLyAgICAgY3R4LmxpbmVUbyh4LCB5KTsKICAgIC8vICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAvLyAgICAgdmFyIHN0cm9rZSA9IGN0eC5zdHJva2VTdHlsZTsKICAgIC8vICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLnRleHRib3hCb3JkZXJDb2xvcjsKICAgIC8vICAgICBjdHguc3Ryb2tlKCk7CiAgICAvLyAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3Ryb2tlOwogICAgLy8gICB9CiAgICAvLyB9CiAgICAvLyBmYWJyaWMuVGV4dGJveC5wcm90b3R5cGUuY2FjaGVQcm9wZXJ0aWVzID0gZmFicmljLlRleHRib3gucHJvdG90eXBlLmNhY2hlUHJvcGVydGllcy5jb25jYXQoJ2FjdGl2ZScpOwogIH0KfTsK"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"maintenancePlanAdd\">\n    <div class=\"child-panel-title\">\n      <h2>图形标注</h2>\n    </div>\n    <div class=\"panel-body\">\n      <div class=\"demo\">\n        <canvas id=\"canvas\" :width=\"width\" :height=\"height\"></canvas>\n        <div class=\"draw-btn-group\">\n          <div :class=\"{active:drawType==''}\" title=\"自由选择\" @click=\"drawTypeChange('')\">\n            <i class=\"draw-icon icon-mouse\"></i>\n          </div>\n          <div :class=\"{active:drawType=='arrow'}\" title=\"画箭头\" @click=\"drawTypeChange('arrow')\">\n            <i class=\"draw-icon icon-1\"></i>\n          </div>\n          <div :class=\"{active:drawType=='text'}\" title=\"文本输入框\" @click=\"drawTypeChange('text')\">\n            <i class=\"draw-icon icon-2\"></i>\n          </div>\n          <div :class=\"{active:drawType=='ellipse'}\" title=\"画圆\" @click=\"drawTypeChange('ellipse')\">\n            <i class=\"draw-icon icon-3\"></i>\n          </div>\n          <div :class=\"{active:drawType=='rectangle'}\" title=\"画矩形\" @click=\"drawTypeChange('rectangle')\">\n            <i class=\"draw-icon icon-4\"></i>\n          </div>\n          <div :class=\"{active:drawType=='polygon'}\" title=\"画多边形\" @click=\"drawPolygon\">\n            <i class=\"draw-icon icon-6\"></i>\n          </div>\n          <div :class=\"{active:drawType=='pen'}\" title=\"笔画\" @click=\"drawTypeChange('pen')\">\n            <i class=\"draw-icon icon-7\"></i>\n          </div>\n          <div :class=\"{active:drawType=='pentagram'}\" title=\"五角星\" @click=\"drawTypeChange('pentagram')\">\n            <i class=\"draw-icon icon-pentagram\"></i>\n          </div>\n          <div @click=\"uploadImg\" title=\"从文件选择图片上传\">\n            <i class=\"draw-icon icon-img\"></i>\n          </div>\n          <div @click=\"loadExpImg\" title=\"加载背景图\">\n            <i class=\"draw-icon icon-back\"></i>\n          </div>\n          <div @click=\"save\" title=\"保存\">\n            <i class=\"draw-icon icon-save\"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n    <input type=\"file\" @change=\"uploadImgChange\" id=\"imgInput\" accept=\"image/*\" />\n    <img id=\"img\" :src=\"imgSrc\" />\n    <img id=\"expImg\" src=\"./assets/icons/draw/exp.jpg\" />\n  </div>\n</template>\n<script>\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      width: 1280,\n      height: 720,\n      rect: [],\n      canvas: {},\n      showMenu: false,\n      x: \"\",\n      y: \"\",\n      mouseFrom: {},\n      mouseTo: {},\n      drawType: null,  //当前绘制图像的种类\n      canvasObjectIndex: 0,\n      textbox: null,\n      rectangleLabel: \"warning\",\n      drawWidth: 2, //笔触宽度\n      color: \"#E34F51\", //画笔颜色\n      drawingObject: null, //当前绘制对象\n      moveCount: 1, //绘制移动计数器\n      doDrawing: false, // 绘制状态\n      //polygon 相关参数\n      polygonMode: false,\n      pointArray: [],\n      lineArray: [],\n      activeShape: false,\n      activeLine: \"\",\n      line: {},\n      delectKlass: {},\n      imgFile: {},\n      imgSrc: \"\",\n    };\n  },\n  watch: {\n    drawType() {\n      this.canvas.selection = !this.drawType;\n    },\n    width() {\n      this.canvas.setWidth(this.width)\n    },\n    height() {\n      this.canvas.setHeight(this.height)\n    },\n  },\n  methods: {\n    // 保存当前画布为png图片\n    save() {\n      var canvas = document.getElementById('canvas')\n      var imgData = canvas.toDataURL('png');\n      imgData = imgData.replace('image/png', 'image/octet-stream');\n      // 下载后的问题名，可自由指定\n      var filename = 'drawingboard_' + (new Date()).getTime() + '.' + 'png';\n      this.saveFile(imgData, filename);\n    },\n    saveFile(data, filename) {\n      var save_link = document.createElement('a');\n      save_link.href = data;\n      save_link.download = filename;\n      var event = document.createEvent('MouseEvents');\n      event.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      save_link.dispatchEvent(event);\n    },\n    uploadImg() {\n      document.getElementById(\"imgInput\").click();\n    },\n    // 从已渲染的DOM元素加载图片至canvas\n    loadExpImg() {\n      var imgElement = document.getElementById(\"expImg\"); //声明我们的图片\n      var imgInstance = new fabric.Image(imgElement, {\n        selectable: false\n        // zIndex:-99,\n      });\n      this.canvas.add(imgInstance);\n    },\n    // 从文件加载图片至canvas\n    uploadImgChange() {\n      // 获取文件\n      var eleImportInput = document.getElementById(\"imgInput\");\n      this.imgFile = eleImportInput.files[0];\n      var imgSrc = \"\",\n          imgTitle = \"\";\n      // 从reader中获取选择文件的src\n      if (/\\.(jpe?g|png|gif)$/i.test(this.imgFile.name)) {\n        var reader = new FileReader();\n        var _this = this;\n        reader.addEventListener(\n            \"load\",\n            function () {\n              imgTitle = _this.imgFile.name;\n              _this.imgSrc = this.result;\n            },\n            false\n        );\n        reader.readAsDataURL(this.imgFile);\n      }\n      var imgElement = document.getElementById(\"img\"); //声明我们的图片\n      imgElement.onload = () => {\n        this.width = imgElement.width\n        this.height = imgElement.height\n        var imgInstance = new fabric.Image(imgElement, {\n          zIndex: -1,\n          selectable: false\n        });\n        this.canvas.add(imgInstance);\n      };\n    },\n    // 开始绘制时，指定绘画种类\n    drawTypeChange(e) {\n      this.drawType = e;\n      this.canvas.skipTargetFind = !!e\n      if (e == \"pen\") {\n        // isDrawingMode为true 才可以自由绘画\n        this.canvas.isDrawingMode = true;\n      } else {\n        this.canvas.isDrawingMode = false;\n      }\n    },\n    // 鼠标按下时触发\n    mousedown(e) {\n      // 记录鼠标按下时的坐标\n      var xy = e.pointer || this.transformMouse(e.e.offsetX, e.e.offsetY);\n      this.mouseFrom.x = xy.x;\n      this.mouseFrom.y = xy.y;\n      this.doDrawing = true;\n      if (this.drawType == \"text\") {\n        this.drawing();\n      }\n      if (this.textbox) {\n        this.textbox.enterEditing();\n        this.textbox.hiddenTextarea.focus();\n      }\n      // 绘制多边形\n      if (this.drawType == \"polygon\") {\n        this.canvas.skipTargetFind = false;\n        try {\n          // 此段为判断是否闭合多边形，点击红点时闭合多边形\n          if (this.pointArray.length > 1) {\n            // e.target.id == this.pointArray[0].id 表示点击了初始红点\n            if (e.target && e.target.id == this.pointArray[0].id) {\n              this.generatePolygon();\n            }\n          }\n          //未点击红点则继续作画\n          if (this.polygonMode) {\n            this.addPoint(e);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n    // 鼠标松开执行\n    mouseup(e) {\n      var xy = e.pointer || this.transformMouse(e.e.offsetX, e.e.offsetY);\n      this.mouseTo.x = xy.x;\n      this.mouseTo.y = xy.y;\n      this.drawingObject = null;\n      this.moveCount = 1;\n      if (this.drawType != \"polygon\") {\n        this.doDrawing = false;\n      }\n    },\n    //鼠标移动过程中已经完成了绘制\n    mousemove(e) {\n      if (this.moveCount % 2 && !this.doDrawing) {\n        //减少绘制频率\n        return;\n      }\n      this.moveCount++;\n      var xy = e.pointer || this.transformMouse(e.e.offsetX, e.e.offsetY);\n      this.mouseTo.x = xy.x;\n      this.mouseTo.y = xy.y;\n      // 多边形与文字框特殊处理\n      if (this.drawType != \"text\" || this.drawType != \"polygon\") {\n        this.drawing(e);\n      }\n      if (this.drawType == \"polygon\") {\n        if (this.activeLine && this.activeLine.class == \"line\") {\n          var pointer = this.canvas.getPointer(e.e);\n          this.activeLine.set({ x2: pointer.x, y2: pointer.y });\n          var points = this.activeShape.get(\"points\");\n          points[this.pointArray.length] = {\n            x: pointer.x,\n            y: pointer.y,\n            zIndex: 1\n          };\n          this.activeShape.set({\n            points: points\n          });\n          this.canvas.renderAll();\n        }\n        this.canvas.renderAll();\n      }\n    },\n    deleteObj() {\n      this.canvas.getActiveObjects().map(item => {\n        this.canvas.remove(item);\n      });\n    },\n    transformMouse(mouseX, mouseY) {\n      return { x: mouseX / 1, y: mouseY / 1 };\n    },\n    // 绘制多边形开始，绘制多边形和其他图形不一样，需要单独处理\n    drawPolygon() {\n      this.drawType = \"polygon\";\n      this.polygonMode = true;\n      //这里画的多边形，由顶点与线组成\n      this.pointArray = new Array();  // 顶点集合\n      this.lineArray = new Array();  //线集合\n      this.canvas.isDrawingMode = false;\n    },\n    addPoint(e) {\n      var random = Math.floor(Math.random() * 10000);\n      var id = new Date().getTime() + random;\n      var circle = new fabric.Circle({\n        radius: 5,\n        fill: \"#ffffff\",\n        stroke: \"#333333\",\n        strokeWidth: 0.5,\n        left: (e.pointer.x || e.e.layerX) / this.canvas.getZoom(),\n        top: (e.pointer.y || e.e.layerY) / this.canvas.getZoom(),\n        selectable: false,\n        hasBorders: false,\n        hasControls: false,\n        originX: \"center\",\n        originY: \"center\",\n        id: id,\n        objectCaching: false\n      });\n      if (this.pointArray.length == 0) {\n        circle.set({\n          fill: \"red\"\n        });\n      }\n      var points = [\n        (e.pointer.x || e.e.layerX) / this.canvas.getZoom(),\n        (e.pointer.y || e.e.layerY) / this.canvas.getZoom(),\n        (e.pointer.x || e.e.layerX) / this.canvas.getZoom(),\n        (e.pointer.y || e.e.layerY) / this.canvas.getZoom()\n      ];\n      this.line = new fabric.Line(points, {\n        strokeWidth: 2,\n        fill: \"#999999\",\n        stroke: \"#999999\",\n        class: \"line\",\n        originX: \"center\",\n        originY: \"center\",\n        selectable: false,\n        hasBorders: false,\n        hasControls: false,\n        evented: false,\n        objectCaching: false\n      });\n      if (this.activeShape) {\n        var pos = this.canvas.getPointer(e.e);\n        var points = this.activeShape.get(\"points\");\n        points.push({\n          x: pos.x,\n          y: pos.y\n        });\n        var polygon = new fabric.Polygon(points, {\n          stroke: \"#333333\",\n          strokeWidth: 1,\n          fill: \"#cccccc\",\n          opacity: 0.3,\n          selectable: false,\n          hasBorders: false,\n          hasControls: false,\n          evented: false,\n          objectCaching: false\n        });\n        this.canvas.remove(this.activeShape);\n        this.canvas.add(polygon);\n        this.activeShape = polygon;\n        this.canvas.renderAll();\n      } else {\n        var polyPoint = [\n          {\n            x: (e.pointer.x || e.e.layerX) / this.canvas.getZoom(),\n            y: (e.pointer.y || e.e.layerY) / this.canvas.getZoom()\n          }\n        ];\n        var polygon = new fabric.Polygon(polyPoint, {\n          stroke: \"#333333\",\n          strokeWidth: 1,\n          fill: \"#cccccc\",\n          opacity: 0.3,\n          selectable: false,\n          hasBorders: false,\n          hasControls: false,\n          evented: false,\n          objectCaching: false\n        });\n        this.activeShape = polygon;\n        this.canvas.add(polygon);\n      }\n      this.activeLine = this.line;\n      this.pointArray.push(circle);\n      this.lineArray.push(this.line);\n      this.canvas.add(this.line);\n      this.canvas.add(circle);\n    },\n    generatePolygon() {\n      var points = new Array();\n      this.pointArray.map((point, index) => {\n        points.push({\n          x: point.left,\n          y: point.top\n        });\n        this.canvas.remove(point);\n      });\n      this.lineArray.map((line, index) => {\n        this.canvas.remove(line);\n      });\n      this.canvas.remove(this.activeShape).remove(this.activeLine);\n      var polygon = new fabric.Polygon(points, {\n        stroke: this.color,\n        strokeWidth: this.drawWidth,\n        fill: \"rgba(255, 255, 255, 0)\",\n        opacity: 1,\n        hasBorders: true,\n        hasControls: false\n      });\n      this.canvas.add(polygon);\n      this.activeLine = null;\n      this.activeShape = null;\n      this.polygonMode = false;\n      this.doDrawing = false;\n      this.drawType = null;\n    },\n    drawing(e) {\n      if (this.drawingObject) {\n        this.canvas.remove(this.drawingObject);\n      }\n      var canvasObject = null;\n      var left = this.mouseFrom.x,\n          top = this.mouseFrom.y,\n          mouseFrom = this.mouseFrom,\n          mouseTo = this.mouseTo;\n      switch (this.drawType) {\n        case \"arrow\": //箭头\n          var x1 = mouseFrom.x,\n              x2 = mouseTo.x,\n              y1 = mouseFrom.y,\n              y2 = mouseTo.y;\n          var w = x2 - x1,\n              h = y2 - y1,\n              sh = Math.cos(Math.PI / 4) * 16;\n          var sin = h / Math.sqrt(Math.pow(w, 2) + Math.pow(h, 2));\n          var cos = w / Math.sqrt(Math.pow(w, 2) + Math.pow(h, 2));\n          var w1 = (16 * sin) / 4,\n              h1 = (16 * cos) / 4,\n              centerx = sh * cos,\n              centery = sh * sin;\n          /**\n           * centerx,centery 表示起始点，终点连线与箭头尖端等边三角形交点相对x，y\n           * w1 ，h1用于确定四个点\n           */\n          var path = \" M \" + x1 + \" \" + y1;\n          path += \" L \" + (x2 - centerx + w1) + \" \" + (y2 - centery - h1);\n          path +=\n              \" L \" + (x2 - centerx + w1 * 2) + \" \" + (y2 - centery - h1 * 2);\n          path += \" L \" + x2 + \" \" + y2;\n          path +=\n              \" L \" + (x2 - centerx - w1 * 2) + \" \" + (y2 - centery + h1 * 2);\n          path += \" L \" + (x2 - centerx - w1) + \" \" + (y2 - centery + h1);\n          path += \" Z\";\n          canvasObject = new fabric.Path(path, {\n            stroke: this.color,\n            fill: this.color,\n            strokeWidth: this.drawWidth\n          });\n          break;\n        case \"pentagram\": //五角星\n          var x1 = mouseFrom.x,\n              x2 = mouseTo.x,\n              y1 = mouseFrom.y,\n              y2 = mouseTo.y;\n          /**\n           * 实现思路  (x1,y1)表示鼠标起始的位置 (x2,y2)表示鼠标抬起的位置\n           * r 表示五边形外圈圆的半径，这里建议自己画个图理解\n           * 正五边形夹角为36度。计算出cos18°，sin18°备用\n           */\n          var w = Math.abs(x2 - x1),\n              h = Math.abs(y2 - y1),\n              r = Math.sqrt(w * w + h * h)\n          var cos18 = Math.cos(18 * Math.PI / 180)\n          var sin18 = Math.sin(18 * Math.PI / 180)\n          /**\n           * 算出对应五个点的坐标转化为路径\n           */\n          var point1 = [x1, y1 + r]\n          var point2 = [x1 + 2 * r * (sin18), y1 + r - 2 * r * (cos18)]\n          var point3 = [x1 - r * (cos18), y1 + r * (sin18)]\n          var point4 = [x1 + r * (cos18), y1 + r * (sin18)]\n          var point5 = [x1 - 2 * r * (sin18), y1 + r - 2 * r * (cos18)]\n          var path = \" M \" + point1[0] + \" \" + point1[1]\n          path += \" L \" + point2[0] + \" \" + point2[1]\n          path += \" L \" + point3[0] + \" \" + point3[1]\n          path += \" L \" + point4[0] + \" \" + point4[1]\n          path += \" L \" + point5[0] + \" \" + point5[1]\n          path += \" Z\";\n          canvasObject = new fabric.Path(path, {\n            stroke: this.color,\n            fill: this.color,\n            strokeWidth: this.drawWidth,\n            // angle:180,  //设置旋转角度\n          });\n          break;\n        case \"ellipse\": //椭圆\n          // 按shift时画正圆，只有在鼠标移动时才执行这个，所以按了shift但是没有拖动鼠标将不会画圆\n          if (e.e.shiftKey) {\n            mouseTo.x - left > mouseTo.y - top ? mouseTo.y = top + mouseTo.x - left : mouseTo.x = left + mouseTo.y - top\n          }\n          var radius =\n              Math.sqrt(\n                  (mouseTo.x - left) * (mouseTo.x - left) +\n                  (mouseTo.y - top) * (mouseTo.y - top)\n              ) / 2;\n          canvasObject = new fabric.Ellipse({\n            left: (mouseTo.x - left) / 2 + left,\n            top: (mouseTo.y - top) / 2 + top,\n            stroke: this.color,\n            fill: \"rgba(255, 255, 255, 0)\",\n            originX: \"center\",\n            originY: \"center\",\n            rx: Math.abs(left - mouseTo.x) / 2,\n            ry: Math.abs(top - mouseTo.y) / 2,\n            strokeWidth: this.drawWidth\n          });\n          break;\n        case \"rectangle\": //长方形\n          // 按shift时画正方型\n          if (e.e.shiftKey) {\n            mouseTo.x - left > mouseTo.y - top ? mouseTo.y = top + mouseTo.x - left : mouseTo.x = left + mouseTo.y - top\n          }\n          var path =\n              \"M \" +\n              mouseFrom.x +\n              \" \" +\n              mouseFrom.y +\n              \" L \" +\n              mouseTo.x +\n              \" \" +\n              mouseFrom.y +\n              \" L \" +\n              mouseTo.x +\n              \" \" +\n              mouseTo.y +\n              \" L \" +\n              mouseFrom.x +\n              \" \" +\n              mouseTo.y +\n              \" L \" +\n              mouseFrom.x +\n              \" \" +\n              mouseFrom.y +\n              \" z\";\n          canvasObject = new fabric.Path(path, {\n            left: left,\n            top: top,\n            stroke: this.color,\n            strokeWidth: this.drawWidth,\n            fill: \"rgba(255, 255, 255, 0)\",\n            hasControls: false\n          });\n          //也可以使用fabric.Rect\n          break;\n        case \"text\": //文本框\n          this.textbox = new fabric.Textbox(\"\", {\n            left: mouseFrom.x,\n            top: mouseFrom.y - 10,\n            // width: 150,\n            fontSize: 16,\n            borderColor: this.color,\n            fill: this.color,\n            hasControls: false\n          });\n          this.canvas.add(this.textbox);\n          this.textbox.enterEditing();\n          this.textbox.hiddenTextarea.focus();\n          break;\n        default:\n          break;\n      }\n      if (canvasObject) {\n        // canvasObject.index = getCanvasObjectIndex();\\\n        this.canvas.add(canvasObject); //.setActiveObject(canvasObject)\n        this.drawingObject = canvasObject;\n      }\n    }\n  },\n  mounted() {\n    this.canvas = new fabric.Canvas(\"canvas\", {\n      // skipTargetFind: false, //当为真时，跳过目标检测。目标检测将返回始终未定义。点击选择将无效\n      // selectable: false,  //为false时，不能选择对象进行修改\n      // selection: false   // 是否可以多个对象为一组\n    });\n    this.canvas.selectionColor = \"rgba(0,0,0,0.05)\";\n    this.canvas.on(\"mouse:down\", this.mousedown);\n    this.canvas.on(\"mouse:move\", this.mousemove);\n    this.canvas.on(\"mouse:up\", this.mouseup);\n    document.onkeydown = e => {\n      // 键盘 delect删除所选元素\n      if (e.keyCode == 46) {\n        this.deleteObj();\n      }\n      // ctrl+z 删除最近添加的元素\n      if (e.keyCode == 90 && e.ctrlKey) {\n        this.canvas.remove(\n            this.canvas.getObjects()[this.canvas.getObjects().length - 1]\n        );\n      }\n    };\n    // var originalRender = fabric.Textbox.prototype._render;\n    // fabric.Textbox.prototype._render = function(ctx) {\n    //   originalRender.call(this, ctx);\n    //   //Don't draw border if it is active(selected/ editing mode)\n    //   if (this.active) return;\n    //   if(this.showTextBoxBorder){\n    //     var w = this.width,\n    //       h = this.height,\n    //       x = -this.width / 2,\n    //       y = -this.height / 2;\n    //     ctx.beginPath();\n    //     ctx.moveTo(x, y);\n    //     ctx.lineTo(x + w, y);\n    //     ctx.lineTo(x + w, y + h);\n    //     ctx.lineTo(x, y + h);\n    //     ctx.lineTo(x, y);\n    //     ctx.closePath();\n    //     var stroke = ctx.strokeStyle;\n    //     ctx.strokeStyle = this.textboxBorderColor;\n    //     ctx.stroke();\n    //     ctx.strokeStyle = stroke;\n    //   }\n    // }\n    // fabric.Textbox.prototype.cacheProperties = fabric.Textbox.prototype.cacheProperties.concat('active');\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-container {\n  flex-direction: column;\n}\nimg,\ninput {\n  display: none;\n}\n.demo {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\ncanvas {\n  border: 1px dashed black;\n}\n.draw-btn-group {\n  // width: 1270px;\n  margin-top: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  & > div {\n    background: #fafafa;\n    cursor: pointer;\n    &:hover {\n      background: #eee;\n    }\n    i {\n      display: flex;\n      background-repeat: no-repeat;\n      background-size: 80%;\n      background-position: 50% 50%;\n      height: 30px;\n      width: 30px;\n    }\n    .icon-1 {\n      background-image: url(\"./assets/icons/draw/1.png\");\n    }\n    .icon-pentagram {\n      background-image: url(\"./assets/icons/draw/pentagram.png\");\n    }\n    .icon-2 {\n      background-image: url(\"./assets/icons/draw/2.png\");\n    }\n    .icon-3 {\n      background-image: url(\"./assets/icons/draw/3.png\");\n    }\n    .icon-4 {\n      background-image: url(\"./assets/icons/draw/4.png\");\n      background-size: 75%;\n    }\n    .icon-5 {\n      background-image: url(\"./assets/icons/draw/5.png\");\n      background-size: 70%;\n    }\n    .icon-6 {\n      background-image: url(\"./assets/icons/draw/6.png\");\n    }\n    .icon-7 {\n      background-image: url(\"./assets/icons/draw/7.png\");\n      background-size: 80%;\n    }\n    .icon-del {\n      background-image: url(\"./assets/icons/draw/del.png\");\n      background-size: 90%;\n    }\n    .icon-img {\n      background-image: url(\"./assets/icons/draw/img.png\");\n      background-size: 80%;\n    }\n    .icon-back {\n      background-image: url(\"./assets/icons/draw/back.png\");\n      background-size: 75%;\n    }\n    .icon-save {\n      background-image: url(\"./assets/icons/draw/save.png\");\n      background-size: 80%;\n    }\n    .icon-mouse {\n      background-image: url(\"./assets/icons/draw/mouse.png\");\n      background-size: 60%;\n    }\n  }\n  .active {\n    background: #eee;\n  }\n}\n</style>"]}]}